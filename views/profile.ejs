<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>profile</title>
    
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/new-theme.css">
    <link rel="stylesheet" href="css/profile.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    


<!-- include nav-->
<%- include('include/_nav') %>
<!-- /include nav -->

<% if(data.succ){ %>
    <div class="alert">
        <i class="fa fa-check-circle" aria-hidden="true"></i>
        <div class="alert_content">
            <h4>success</h4>
            <p> <strong> <%= data.succ %> </strong> </p>
        </div>
        <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span> 
    </div>
<% } %>

<section class="profile">
    <div class="dashbord">
        <h2>dashbord</h2>
        <div class="dashbord_button">
            <a href="/profile">
                <div class="dash_btn dot profile_page"  ><i class="fa fa-user" aria-hidden="true"></i> <p>profile</p></div>
            </a>
            <a href="/appointment">
                <div class="dash_btn dot"  ><i class="fa fa-th-list" aria-hidden="true"></i> <p>appointments</p></div>
            </a>
            <a href="/medical_report">
                <div class="dash_btn dot"  ><i class="fa fa-user" aria-hidden="true"></i> <p>medical reports </p></div>
            </a>
            <a href="/setting">
                <div class="dash_btn dot"  ><i class="fa fa-user" aria-hidden="true"></i> <p>setting</p></div>
            </a>
        </div>
    </div>

    <div class="dashbord_content1 mySlides">
        <form action="/update_profile" method="POST" enctype="multipart/form-data" > 
            <div class="save_change" >
                <h2>Account</h2>
                <button type="submit" class="save_btn">save change</button>
            </div>
            <div class="border_div">
                <div class="photo-con">
                    <h4>profile photo</h4>
                    <div class="profile_photo">
                        <div class="img">                            
                            <img src="./uploads/<%= data.user.file %>"  id="preview">
                        </div>
                        <div class="select_photo">
                            <p> pick a photo from your system</p>
                            <label class="custom-file-upload">
                                <input type="file" id="filetag" name="file"   >                              
                                <h5>select photo</h5>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="inputs">
                    <label for="name"><h4>name</h4></label>
                    <input type="text" name="name" id="name" value= '<%= data.user.name %>' >
                </div>
            </div>
            <div class="border_div">
                <div class="inputs">
                    <label for="number"><h4>number</h4></label>
                    <div class="num">
                        <input type="text" name="number" id="number" value= '<%= data.user.number %>' readonly>
                        <i class="fa fa-pencil" aria-hidden="true" class="pencil" onclick = "editnumber()" ></i>
                    </div>
                </div>
                <div class="inputs">
                    <label for="email"><h4>email</h4></label>
                    <input type="email" name="email" id="email" value= '<%= data.user.email %> '>
                </div>
                <div class="inputs">
                    <label for="gender"><h4>gender</h4></label>
                    <select id="gender" name="gender" >
                        <option value = '<%= data.user.gender %>' > <%= data.user.gender %> </option>
                        <option value="male">male</option>
                        <option value="female">female</option>
                        <option value="other">other</option>
                    </select>
                </div>
                <div class="inputs">
                    <label for="date"><h4>date</h4></label>
                    <input type="date" name="date" id="date" value= '<%= data.user.data %>' >
                </div>
                <div class="inputs">
                    <label for="timezon"><h4>timezon</h4></label>
                    <input type="text" name="timezon" id="timezon" value= '<%= data.user.timezon %>' >
                </div>
            </div>
            <div class="border_div">
                <div class="inputs">
                    <label for="house no"><h4>house no</h4></label>
                    <input type="text" name="house_no" id="house no" value= '<%= data.user.house_no %>' >
                </div>
                <div class="inputs">
                    <label for="colony"><h4>colony</h4></label>
                    <input type="text" name="colony" id="colony" value = '<%= data.user.colony %>' >
                </div>
                <div class="inputs">
                    <label for="city"><h4>city</h4></label>
                    <input type="text" name="city" id="city" value= '<%= data.user.city %>' >
                </div>
                <div class="inputs">
                    <label for="state"><h4>state</h4></label>
                    <input type="text" name="state" id="state" value= '<%= data.user.state %>' >
                </div>
                <div class="inputs">
                    <label for="country"><h4>country</h4></label>
                    <select id="country" name="country" value= '<%= data.user.country %>' >
                        <option value = '<%= data.user.country %>' ><%= data.user.country %></option>
                        <option value="india">india</option>
                        <option value="usa">usa</option>
                        <option value="newyork">newyork</option>
                    </select>
                </div>
            </div>

        </form>
    </div>

</section>

<div class="number_change" id="number_change">
    <div class="edit_number">
        <h2>change phone number</h2>
        <form>
            <div class="inputs">
                <label for="number"><h4>Current phone number</h4></label>
                <input type="text" class="number" value= <%= data.user.number %>  readonly>
                <label for="number"><h4>Enter new phone number</h4></label>
                <input type="text" class="new_number">
            </div>
            <div class="send_otp">
                <button class="cancel_btn" onclick="noteditnumber()">cancel</button>
                <button class="otp_btn">send otp</button>
            </div>
        </form>
    </div>
</div>



<!-- include _footer-->
<%- include('include/_footer') %>

<!-- /include _footer -->


<script>

    var medical_report = document.getElementsByClassName("profile_page");
    medical_report[0].style.background = "rgb(226, 220, 220)"; 
    medical_report[0].classList.add("mystyle");
  

    
    //............................................
    function editnumber(){
      var number_change = document.getElementsByClassName("number_change");
        number_change[0].style.display = "flex";
    }
    function noteditnumber(){
      var number_change = document.getElementsByClassName("number_change");
        number_change[0].style.display = "none";
    }
    
    //...............................................
    function cancel_appointment_btn(){
        var cancel_appointment_btn = document.getElementsByClassName("cancel_appointment_btn");
        cancel_appointment_btn[0].style.display = "flex";
    }
    
    function cancel_appointment_btn_no(){
        var cancel_appointment_btn = document.getElementsByClassName("cancel_appointment_btn");
        cancel_appointment_btn[0].style.display = "none";
    }
    //............................................
    
    function add_record(){
      var number_change = document.getElementsByClassName("add_record");
        number_change[0].style.display = "flex";
    }
    function not_add_record(){
      var number_change = document.getElementsByClassName("add_record");
        number_change[0].style.display = "none";
    }
    
    

///.................................................................. 2 min me aaya 
var fileTag = document.getElementById("filetag"),
    preview = document.getElementById("preview");
    
fileTag.addEventListener("change", function() {
  changeImage(this);
});

function changeImage(input) {
  var reader;
  if (input.files && input.files[0]) {
    reader = new FileReader();
    reader.onload = function(e) {
      preview.setAttribute('src', e.target.result);
    }
    reader.readAsDataURL(input.files[0]);
  }
}


function previewImages() {
    var preview = document.querySelector('#previeww');
    if (this.files) {
      [].forEach.call(this.files, readAndPreview);
    }
    function readAndPreview(file) {
      if (!/\.(jpe?g|png|gif)$/i.test(file.name)) {
        return alert(file.name + " is not an image");
      } // else...
      var reader = new FileReader();
      reader.addEventListener("load", function() {
        var image = new Image();
        image.height = 100;
        image.title  = file.name;
        image.src    = this.result;
        preview.appendChild(image);
      });
      reader.readAsDataURL(file);
    }
  }
  
  document.querySelector('#file-input').addEventListener("change", previewImages);


</script>


</body>
</html>